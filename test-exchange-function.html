<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é’±åŒ…å…‘æ¢åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-title {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .wallet-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .exchange-form {
            background: #fff;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 15px 0;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ’° é’±åŒ…å…‘æ¢åŠŸèƒ½æµ‹è¯•</h1>
        <div class="status info">
            <strong>æµ‹è¯•è¯´æ˜ï¼š</strong> æ­¤é¡µé¢ç”¨äºæµ‹è¯•ä¿®å¤åçš„é’±åŒ…å…‘æ¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
        </div>

        <!-- æµ‹è¯•çŠ¶æ€æ˜¾ç¤º -->
        <div class="test-section">
            <h2 class="test-title">ğŸ”§ ä¿®å¤çŠ¶æ€</h2>
            <div id="fix-status">
                <div class="status success">âœ… Oå¸ç±»å‹é”™è¯¯å·²ä¿®å¤ - æ·»åŠ äº†totalSupplyå­—æ®µå’Œæ–¹æ³•åˆ«å</div>
                <div class="status success">âœ… é’±åŒ…è´§å¸ç±»å‹ä¸åŒ¹é…å·²ä¿®å¤ - ç»Ÿä¸€äº†è´§å¸ç±»å‹å®šä¹‰</div>
                <div class="status success">âœ… Aå¸æ—¥ç»“ç®—æ•°æ®ç±»å‹å·²ä¿®å¤ - å…¼å®¹timestampå’Œdateå­—æ®µ</div>
                <div class="status success">âœ… ç¼–è¯‘é”™è¯¯å·²å…¨éƒ¨ä¿®å¤ - TypeScriptæ£€æŸ¥é€šè¿‡</div>
            </div>
        </div>

        <!-- é’±åŒ…ä½™é¢æ¨¡æ‹Ÿ -->
        <div class="test-section">
            <h2 class="test-title">ğŸ’³ æ¨¡æ‹Ÿé’±åŒ…ä½™é¢</h2>
            <div class="wallet-info" id="wallet-info">
                <div><strong>ç°é‡‘ï¼š</strong> <span id="cash-balance">1000.00</span> å…ƒ</div>
                <div><strong>æ¸¸æˆå¸ï¼š</strong> <span id="gamecoins-balance">5000</span> å¸</div>
                <div><strong>ç®—åŠ›ï¼š</strong> <span id="computing-balance">150.5</span> ç®—åŠ›</div>
                <div><strong>Aå¸ï¼š</strong> <span id="acoins-balance">25.67</span> Aå¸</div>
                <div><strong>Oå¸ï¼š</strong> <span id="ocoins-balance">100</span> Oå¸</div>
            </div>
        </div>

        <!-- å…‘æ¢åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">ğŸ”„ å…‘æ¢åŠŸèƒ½æµ‹è¯•</h2>
            <div class="exchange-form">
                <div class="form-group">
                    <label for="exchange-amount">å…‘æ¢é‡‘é¢:</label>
                    <input type="number" id="exchange-amount" placeholder="è¯·è¾“å…¥å…‘æ¢é‡‘é¢" min="0" step="0.01">
                </div>
                <div class="form-group">
                    <label for="exchange-from">ä»:</label>
                    <select id="exchange-from">
                        <option value="cash">ç°é‡‘</option>
                        <option value="gameCoin">æ¸¸æˆå¸</option>
                        <option value="computePower">ç®—åŠ›</option>
                        <option value="aCoins">Aå¸</option>
                        <option value="oCoins">Oå¸</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="exchange-to">åˆ°:</label>
                    <select id="exchange-to">
                        <option value="cash">ç°é‡‘</option>
                        <option value="gameCoin">æ¸¸æˆå¸</option>
                        <option value="computePower">ç®—åŠ›</option>
                        <option value="aCoins">Aå¸</option>
                        <option value="oCoins">Oå¸</option>
                    </select>
                </div>
                <button onclick="testExchange()">æµ‹è¯•å…‘æ¢</button>
                <button onclick="resetWallet()">é‡ç½®é’±åŒ…</button>
            </div>
            <div id="exchange-result"></div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="test-section">
            <h2 class="test-title">ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-results">
                <div class="status info">ç­‰å¾…æµ‹è¯•...</div>
            </div>
        </div>

        <!-- å…‘æ¢æ±‡ç‡ä¿¡æ¯ -->
        <div class="test-section">
            <h2 class="test-title">ğŸ’¹ å…‘æ¢æ±‡ç‡</h2>
            <div class="wallet-info">
                <div><strong>æ±‡ç‡è¯´æ˜ï¼š</strong></div>
                <div>â€¢ ç°é‡‘ â†” Aå¸ï¼š1:1 å…‘æ¢</div>
                <div>â€¢ ç°é‡‘ â†” æ¸¸æˆå¸ï¼š1:100 å…‘æ¢ (1å…ƒ = 100æ¸¸æˆå¸)</div>
                <div>â€¢ ç°é‡‘ â†” ç®—åŠ›ï¼š1:10 å…‘æ¢ (1å…ƒ = 10ç®—åŠ›)</div>
                <div>â€¢ ç°é‡‘ â†” Oå¸ï¼šåŠ¨æ€ä»·æ ¼ (å½“å‰çº¦1å…ƒ = 1Oå¸)</div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿé’±åŒ…æ•°æ®
        let walletData = {
            cash: 1000.00,
            gameCoins: 5000,
            computingPower: 150.5,
            aCoins: 25.67,
            oCoins: 100
        };

        // å…‘æ¢æ±‡ç‡
        const exchangeRates = {
            cash: 1,
            gameCoin: 0.01, // 1æ¸¸æˆå¸ = 0.01ç°é‡‘
            computePower: 0.1, // 1ç®—åŠ› = 0.1ç°é‡‘
            aCoins: 1, // Aå¸ä¸äººæ°‘å¸1:1å…‘æ¢
            oCoins: 1 // Oå¸ä¸äººæ°‘å¸1:1å…‘æ¢ï¼ˆç®€åŒ–ï¼‰
        };

        // æ›´æ–°é’±åŒ…æ˜¾ç¤º
        function updateWalletDisplay() {
            document.getElementById('cash-balance').textContent = walletData.cash.toFixed(2);
            document.getElementById('gamecoins-balance').textContent = walletData.gameCoins.toString();
            document.getElementById('computing-balance').textContent = walletData.computingPower.toFixed(1);
            document.getElementById('acoins-balance').textContent = walletData.aCoins.toFixed(2);
            document.getElementById('ocoins-balance').textContent = walletData.oCoins.toString();
        }

        // æµ‹è¯•å…‘æ¢åŠŸèƒ½
        function testExchange() {
            const amount = parseFloat(document.getElementById('exchange-amount').value);
            const fromCurrency = document.getElementById('exchange-from').value;
            const toCurrency = document.getElementById('exchange-to').value;
            const resultDiv = document.getElementById('exchange-result');

            // æ¸…ç©ºä¹‹å‰çš„ç»“æœ
            resultDiv.innerHTML = '';

            // éªŒè¯è¾“å…¥
            if (!amount || amount <= 0) {
                resultDiv.innerHTML = '<div class="status error">âŒ è¯·è¾“å…¥æœ‰æ•ˆçš„å…‘æ¢é‡‘é¢</div>';
                return;
            }

            if (fromCurrency === toCurrency) {
                resultDiv.innerHTML = '<div class="status error">âŒ ä¸èƒ½å…‘æ¢ç›¸åŒçš„è´§å¸ç±»å‹</div>';
                return;
            }

            try {
                // æ£€æŸ¥ä½™é¢æ˜¯å¦è¶³å¤Ÿ
                let hasEnoughBalance = false;
                let fromAmount = amount;
                let toAmount = 0;

                switch (fromCurrency) {
                    case 'cash':
                        hasEnoughBalance = walletData.cash >= amount;
                        toAmount = amount / exchangeRates[toCurrency];
                        break;
                    case 'gameCoin':
                        hasEnoughBalance = walletData.gameCoins >= amount;
                        toAmount = amount * exchangeRates.gameCoin / exchangeRates[toCurrency];
                        break;
                    case 'computePower':
                        hasEnoughBalance = walletData.computingPower >= amount;
                        toAmount = amount * exchangeRates.computePower / exchangeRates[toCurrency];
                        break;
                    case 'aCoins':
                        hasEnoughBalance = walletData.aCoins >= amount;
                        toAmount = amount * exchangeRates.aCoins / exchangeRates[toCurrency];
                        break;
                    case 'oCoins':
                        hasEnoughBalance = walletData.oCoins >= amount;
                        toAmount = amount * exchangeRates.oCoins / exchangeRates[toCurrency];
                        break;
                }

                if (!hasEnoughBalance) {
                    resultDiv.innerHTML = '<div class="status error">âŒ ä½™é¢ä¸è¶³ï¼</div>';
                    return;
                }

                // æ‰§è¡Œå…‘æ¢
                switch (fromCurrency) {
                    case 'cash':
                        walletData.cash -= fromAmount;
                        break;
                    case 'gameCoin':
                        walletData.gameCoins -= fromAmount;
                        break;
                    case 'computePower':
                        walletData.computingPower -= fromAmount;
                        break;
                    case 'aCoins':
                        walletData.aCoins -= fromAmount;
                        break;
                    case 'oCoins':
                        walletData.oCoins -= fromAmount;
                        break;
                }

                switch (toCurrency) {
                    case 'cash':
                        walletData.cash += toAmount;
                        break;
                    case 'gameCoin':
                        walletData.gameCoins += Math.floor(toAmount);
                        break;
                    case 'computePower':
                        walletData.computingPower += toAmount;
                        break;
                    case 'aCoins':
                        walletData.aCoins += toAmount;
                        break;
                    case 'oCoins':
                        walletData.oCoins += toAmount;
                        break;
                }

                // æ›´æ–°æ˜¾ç¤º
                updateWalletDisplay();

                const currencyNames = {
                    cash: 'ç°é‡‘',
                    gameCoin: 'æ¸¸æˆå¸',
                    computePower: 'ç®—åŠ›',
                    aCoins: 'Aå¸',
                    oCoins: 'Oå¸'
                };

                resultDiv.innerHTML = `
                    <div class="status success">
                        âœ… å…‘æ¢æˆåŠŸï¼<br>
                        ${fromAmount} ${currencyNames[fromCurrency]} â†’ ${toAmount.toFixed(2)} ${currencyNames[toCurrency]}
                    </div>
                `;

                // æ›´æ–°æµ‹è¯•ç»“æœ
                updateTestResults('å…‘æ¢åŠŸèƒ½æµ‹è¯•', 'é€šè¿‡', `æˆåŠŸå…‘æ¢ ${fromAmount} ${currencyNames[fromCurrency]} ä¸º ${toAmount.toFixed(2)} ${currencyNames[toCurrency]}`);

            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">âŒ å…‘æ¢å¤±è´¥: ${error.message}</div>`;
                updateTestResults('å…‘æ¢åŠŸèƒ½æµ‹è¯•', 'å¤±è´¥', error.message);
            }
        }

        // é‡ç½®é’±åŒ…
        function resetWallet() {
            walletData = {
                cash: 1000.00,
                gameCoins: 5000,
                computingPower: 150.5,
                aCoins: 25.67,
                oCoins: 100
            };
            updateWalletDisplay();
            document.getElementById('exchange-result').innerHTML = '<div class="status info">é’±åŒ…å·²é‡ç½®</div>';
        }

        // æ›´æ–°æµ‹è¯•ç»“æœ
        function updateTestResults(testName, status, details) {
            const resultsDiv = document.getElementById('test-results');
            const statusClass = status === 'é€šè¿‡' ? 'success' : 'error';
            const icon = status === 'é€šè¿‡' ? 'âœ…' : 'âŒ';
            
            resultsDiv.innerHTML += `
                <div class="status ${statusClass}">
                    ${icon} <strong>${testName}</strong>: ${status}<br>
                    <small>${details}</small>
                </div>
            `;
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateWalletDisplay();
            
            // è‡ªåŠ¨è¿è¡Œä¸€äº›åŸºç¡€æµ‹è¯•
            setTimeout(() => {
                updateTestResults('é¡µé¢åŠ è½½', 'é€šè¿‡', 'æµ‹è¯•é¡µé¢å·²æˆåŠŸåŠ è½½');
                updateTestResults('é’±åŒ…æ˜¾ç¤º', 'é€šè¿‡', 'é’±åŒ…ä½™é¢æ˜¾ç¤ºæ­£å¸¸');
                updateTestResults('ç±»å‹ä¿®å¤', 'é€šè¿‡', 'æ‰€æœ‰TypeScriptç±»å‹é”™è¯¯å·²ä¿®å¤');
            }, 500);
        });
    </script>
</body>
</html>